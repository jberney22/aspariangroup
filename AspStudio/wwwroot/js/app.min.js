/*
Template Name: ASPSTUDIO - Responsive Bootstrap 5 Admin Template
Version: 2.0.0
Author: Sean Ngu
Website: http://www.seantheme.com/asp-studio/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
	01. Global Variable
	02. Handle Scrollbar
	03. Handle Header Search Bar
	04. Handle Sidebar Menu
	05. Handle Sidebar Minify
	06. Handle Sidebar Minify Float Menu
	07. Handle Dropdown Close Option
	08. Handle Panel - Remove / Reload / Collapse / Expand
	09. Handle Tooltip & Popover Activation
	10. Handle Scroll to Top Button Activation
	11. Handle hexToRgba
	12. Handle Scroll to
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */
var FONT_FAMILY    = '-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"';
var COLOR_BLUE     = '#1f6bff';
var COLOR_GREEN    = '#1abd36';
var COLOR_ORANGE   = '#ff9500';
var COLOR_RED      = '#ff3b30';
var COLOR_AQUA     = '#30beff';
var COLOR_PURPLE   = '#5b2e91';
var COLOR_YELLOW   = '#ffcc00';
var COLOR_INDIGO   = '#640df3';
var COLOR_PINK     = '#ff2d55';
var COLOR_TEAL     = '#0cd096';
var COLOR_BLACK    = '#000000';
var COLOR_WHITE    = '#FFFFFF';
var COLOR_GRAY_100 = '#ebeef4';
var COLOR_GRAY_200 = '#dae0ec';
var COLOR_GRAY_300 = '#c9d2e3';
var COLOR_GRAY_400 = '#a8b6d1';
var COLOR_GRAY_500 = '#869ac0';
var COLOR_GRAY_600 = '#657eae';
var COLOR_GRAY_700 = '#4d6593';
var COLOR_GRAY_800 = '#3c4e71';
var COLOR_GRAY_900 = '#212837';


/* 02. Handle Scrollbar
------------------------------------------------ */
var handleSlimScroll = function() {
	"use strict";
	$.when($('[data-scrollbar=true]').each( function() {
		generateSlimScroll($(this));
	})).done(function() {
		$('[data-scrollbar="true"]').mouseover();
	});
};
var generateSlimScroll = function(element) {
	var isMobile = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
	
	if ($(element).attr('data-init') || (isMobile && $(element).attr('data-skip-mobile'))) {
		return;
	}
	var dataHeight = $(element).attr('data-height');
		dataHeight = (!dataHeight) ? $(element).height() : dataHeight;

	var scrollBarOption = {
		height: dataHeight, 
		alwaysVisible: false
	};
	if(isMobile) {
		$(element).css('height', dataHeight);
		$(element).css('overflow-x','scroll');
	} else {
		$(element).slimScroll(scrollBarOption);
		$(element).closest('.slimScrollDiv').find('.slimScrollBar').hide();
	}
	$(element).attr('data-init', true);
};


/* 04. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenu = function() {
	"use strict";
	$(document).on('click', '.app-sidebar .menu > .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		var target = $(this).next('.menu-submenu');
		var otherMenu = $('.app-sidebar .menu > .menu-item.has-sub > .menu-submenu').not(target);

		if ($('.app-sidebar-minified').length === 0) {
			$(otherMenu).slideUp(250);
			$(otherMenu).closest('.menu-item').removeClass('expand');
			
			$(target).slideToggle(250);
			var targetElm = $(target).closest('.menu-item');
			if ($(targetElm).hasClass('expand')) {
				$(targetElm).removeClass('expand');
			} else {
				$(targetElm).addClass('expand');
			}
		}
	});
	$(document).on('click', '.app-sidebar .menu > .menu-item.has-sub .menu-submenu .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		if ($('.app-sidebar-minified').length === 0) {
			var target = $(this).next('.menu-submenu');
			$(target).slideToggle(250);
		}
	});
};


/* 05. Handle Sidebar Minify
------------------------------------------------ */
var MOBILE_SIDEBAR_TOGGLE_CLASS = 'app-sidebar-mobile-toggled';
var MOBILE_SIDEBAR_CLOSED_CLASS = 'app-sidebar-mobile-closed';
var handleSidebarMinify = function() {
	$('[data-toggle="sidebar-minify"]').on('click', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		var targetClass = 'app-sidebar-minified';
		
		if ($(targetElm).hasClass(targetClass)) {
			$(targetElm).removeClass(targetClass);
			localStorage.removeItem('appSidebarMinified');
		} else {
			$(targetElm).addClass(targetClass);
			localStorage.setItem('appSidebarMinified', true);
		}
	});
	
	if (typeof(Storage) !== 'undefined') {
		if (localStorage.appSidebarMinified) {
			$('#app').addClass('app-sidebar-minified');
		}
	}
};
var handleSidebarMobileToggle = function() {
	$(document).on('click', '[data-toggle="sidebar-mobile"]', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		
		$(targetElm).removeClass(MOBILE_SIDEBAR_CLOSED_CLASS).addClass(MOBILE_SIDEBAR_TOGGLE_CLASS);
	});
};
var handleSidebarMobileDismiss = function() {
	$(document).on('click', '[data-dismiss="sidebar-mobile"]', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		
		$(targetElm).removeClass(MOBILE_SIDEBAR_TOGGLE_CLASS).addClass(MOBILE_SIDEBAR_CLOSED_CLASS);
		setTimeout(function() {
			$(targetElm).removeClass(MOBILE_SIDEBAR_CLOSED_CLASS);
		}, 250);
	});
};


/* 06. Handle Sidebar Minify Float Menu
------------------------------------------------ */
var floatSubMenuTimeout;
var targetFloatMenu;
var handleMouseoverFloatSubMenu = function(elm) {
	clearTimeout(floatSubMenuTimeout);
};
var handleMouseoutFloatSubMenu = function(elm) {
	floatSubMenuTimeout = setTimeout(function() {
		$('.app-float-submenu').remove();
	}, 250);
};
var handleSidebarMinifyFloatMenu = function() {
	$(document).on('click', '.app-float-submenu .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		var target = $(this).next('.menu-submenu');
		$(target).slideToggle(250, function() {
			var targetMenu = $('.app-float-submenu');
			var targetHeight = $(targetMenu).height() + 20;
			var targetOffset = $(targetMenu).offset();
			var targetTop = $(targetMenu).attr('data-offset-top');
			var windowHeight = $(window).height();
			if ((windowHeight - targetTop) > targetHeight) {
				$('.app-float-submenu').css({
					'top': targetTop,
					'bottom': 'auto',
					'overflow': 'initial'
				});
			} else {
				$('.app-float-submenu').css({
					'bottom': 0,
					'overflow': 'scroll'
				});
			}
		});
	});
	$(document).on('mouseover', '.app-sidebar-minified .app-sidebar .menu .menu-item.has-sub > .menu-link', function() {
		clearTimeout(floatSubMenuTimeout);
		
		var targetMenu = $(this).closest('.menu-item').find('.menu-submenu').first();
		if (targetFloatMenu == this) {
			return false;
		} else {
			targetFloatMenu = this;
		}
		var targetMenuHtml = $(targetMenu).html();
		
		if (targetMenuHtml) {
			var targetHeight = $(targetMenu).height() + 20;
			var targetOffset = $(this).offset();
			var targetTop = targetOffset.top - $(window).scrollTop();
			var targetLeft = (!$('#app').hasClass('app-sidebar-right')) ? $('#sidebar').width() + $('#sidebar').offset().left : 'auto';
			var targetRight = (!$('#app').hasClass('app-sidebar-right')) ? 'auto' : $('#sidebar').width();
			var windowHeight = $(window).height();
			var submenuHeight = 0;
			
			if ($('.app-float-submenu').length == 0) {
				targetMenuHtml = '<div class="app-float-submenu" data-offset-top="'+ targetTop +'" onmouseover="handleMouseoverFloatSubMenu(this)" onmouseout="handleMouseoutFloatSubMenu(this)">' + targetMenuHtml + '</div>';
				$('body').append(targetMenuHtml);
			} else {
				$('.app-float-submenu').html(targetMenuHtml);
			}
			submenuHeight = $('.app-float-submenu').height();
			if ((windowHeight - targetTop) > targetHeight && ((targetTop + submenuHeight) < windowHeight)) {
				$('.app-float-submenu').css({
					'top': targetTop,
					'left': targetLeft,
					'bottom': 'auto',
					'right': targetRight
				});
			} else {
				$('.app-float-submenu').css({
					'bottom': 0,
					'top': 'auto',
					'left': targetLeft,
					'right': targetRight
				});
			}
		} else {
			$('.app-float-submenu').remove();
			targetFloatMenu = '';
		}
	});
	$(document).on('mouseout', '.app-sidebar-minified .app-sidebar .menu > .menu-item.has-sub > .menu-link', function() {
		floatSubMenuTimeout = setTimeout(function() {
			$('.app-float-submenu').remove();
			targetFloatMenu = '';
		}, 250);
	});
}


/* 07. Handle Dropdown Close Option
------------------------------------------------ */
var handleDropdownClose = function() {
	$(document).on('click', '[data-dropdown-close="false"]', function(e) {
		e.stopPropagation();
	});
};


/* 08. Handle Card - Remove / Reload / Collapse / Expand
------------------------------------------------ */
var cardActionRunning = false;
var handleCardAction = function() {
	"use strict";

	if (cardActionRunning) {
		return false;
	}
	cardActionRunning = true;

	// expand
	$(document).on('mouseover', '[data-toggle=card-expand]', function(e) {
		if (!$(this).attr('data-init')) {
			$(this).tooltip({
				title: 'Expand / Compress',
				placement: 'bottom',
				trigger: 'hover',
				container: 'body'
			});
			$(this).tooltip('show');
			$(this).attr('data-init', true);
		}
	});
	$(document).on('click', '[data-toggle=card-expand]', function(e) {
		e.preventDefault();
		var target = $(this).closest('.card');
		var targetBody = $(target).find('.card-body');
		var targetClass = 'card-expand';
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(targetClass) && $(target).hasClass(targetClass)) {
			$('body, .card').removeClass(targetClass);
			$('.card').removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(targetClass);
			$(this).closest('.card').addClass(targetClass);
		}
		$(window).trigger('resize');
	});
};


/* 09. Handle Tooltip & Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
	"use strict";
	if ($('[data-toggle="tooltip"]').length !== 0) {
		$('[data-toggle=tooltip]').tooltip();
	}
	if ($('[data-toggle="popover"]').length !== 0) {
		$('[data-toggle=popover]').popover();
	}
};


/* 10. Handle Scroll to Top Button Activation
------------------------------------------------ */
var handleScrollToTopButton = function() {
	"use strict";
	$(document).on('scroll', function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= 200) {
			$('[data-click=scroll-top]').addClass('show');
		} else {
			$('[data-click=scroll-top]').removeClass('show');
		}
	});
	$('[data-click=scroll-top]').on('click', function(e) {
		e.preventDefault();
		$('html, body, .content').animate({
			scrollTop: $("body").offset().top
		}, 500);
	});
};


/* 11. Handle hexToRgba
------------------------------------------------ */
var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};


/* 12. Handle Scroll to
------------------------------------------------ */
var handleScrollTo = function() {
	$(document).on('click', '[data-toggle="scroll-to"]', function(e) {
		e.preventDefault();
		
		var targetElm = ($(this).attr('data-target')) ? $(this).attr('data-target') : $(this).attr('href');
		if (targetElm) {
			$('html, body').animate({
				scrollTop: $(targetElm).offset().top - $('#header').height() - 24
			}, 0);
		}
	});
};


/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initSidebar();
			this.initHeader();
			this.initComponent();
		},
		initSidebar: function() {
			handleSidebarMinifyFloatMenu();
			handleSidebarMenu();
			handleSidebarMinify();
			handleSidebarMobileToggle();
			handleSidebarMobileDismiss();
		},
		initHeader: function() {
		},
		initComponent: function() {
			handleSlimScroll();
			handleCardAction();
			handelTooltipPopoverActivation();
			handleScrollToTopButton();
			handleDropdownClose();
			handleScrollTo();
		},
		scrollTop: function() {
			$('html, body, .content').animate({
				scrollTop: $('body').offset().top
			}, 0);
		}
	};
}();

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuVGVtcGxhdGUgTmFtZTogQVNQU1RVRElPIC0gUmVzcG9uc2l2ZSBCb290c3RyYXAgNSBBZG1pbiBUZW1wbGF0ZVxyXG5WZXJzaW9uOiAyLjAuMFxyXG5BdXRob3I6IFNlYW4gTmd1XHJcbldlYnNpdGU6IGh0dHA6Ly93d3cuc2VhbnRoZW1lLmNvbS9hc3Atc3R1ZGlvL1xyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdEFQUFMgQ09OVEVOVCBUQUJMRVxyXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0PCEtLSA9PT09PT09PSBHTE9CQUwgU0NSSVBUIFNFVFRJTkcgPT09PT09PT0gLS0+XHJcblx0MDEuIEdsb2JhbCBWYXJpYWJsZVxyXG5cdDAyLiBIYW5kbGUgU2Nyb2xsYmFyXHJcblx0MDMuIEhhbmRsZSBIZWFkZXIgU2VhcmNoIEJhclxyXG5cdDA0LiBIYW5kbGUgU2lkZWJhciBNZW51XHJcblx0MDUuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeVxyXG5cdDA2LiBIYW5kbGUgU2lkZWJhciBNaW5pZnkgRmxvYXQgTWVudVxyXG5cdDA3LiBIYW5kbGUgRHJvcGRvd24gQ2xvc2UgT3B0aW9uXHJcblx0MDguIEhhbmRsZSBQYW5lbCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXHJcblx0MDkuIEhhbmRsZSBUb29sdGlwICYgUG9wb3ZlciBBY3RpdmF0aW9uXHJcblx0MTAuIEhhbmRsZSBTY3JvbGwgdG8gVG9wIEJ1dHRvbiBBY3RpdmF0aW9uXHJcblx0MTEuIEhhbmRsZSBoZXhUb1JnYmFcclxuXHQxMi4gSGFuZGxlIFNjcm9sbCB0b1xyXG5cdFxyXG5cdDwhLS0gPT09PT09PT0gQVBQTElDQVRJT04gU0VUVElORyA9PT09PT09PSAtLT5cclxuXHRBcHBsaWNhdGlvbiBDb250cm9sbGVyXHJcbiovXHJcblxyXG5cclxuXHJcbi8qIDAxLiBHbG9iYWwgVmFyaWFibGVcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBGT05UX0ZBTUlMWSAgICA9ICctYXBwbGUtc3lzdGVtLEJsaW5rTWFjU3lzdGVtRm9udCxcIlNlZ29lIFVJXCIsUm9ib3RvLFwiSGVsdmV0aWNhIE5ldWVcIixBcmlhbCxcIk5vdG8gU2Fuc1wiLHNhbnMtc2VyaWYsXCJBcHBsZSBDb2xvciBFbW9qaVwiLFwiU2Vnb2UgVUkgRW1vamlcIixcIlNlZ29lIFVJIFN5bWJvbFwiLFwiTm90byBDb2xvciBFbW9qaVwiJztcclxudmFyIENPTE9SX0JMVUUgICAgID0gJyMxZjZiZmYnO1xyXG52YXIgQ09MT1JfR1JFRU4gICAgPSAnIzFhYmQzNic7XHJcbnZhciBDT0xPUl9PUkFOR0UgICA9ICcjZmY5NTAwJztcclxudmFyIENPTE9SX1JFRCAgICAgID0gJyNmZjNiMzAnO1xyXG52YXIgQ09MT1JfQVFVQSAgICAgPSAnIzMwYmVmZic7XHJcbnZhciBDT0xPUl9QVVJQTEUgICA9ICcjNWIyZTkxJztcclxudmFyIENPTE9SX1lFTExPVyAgID0gJyNmZmNjMDAnO1xyXG52YXIgQ09MT1JfSU5ESUdPICAgPSAnIzY0MGRmMyc7XHJcbnZhciBDT0xPUl9QSU5LICAgICA9ICcjZmYyZDU1JztcclxudmFyIENPTE9SX1RFQUwgICAgID0gJyMwY2QwOTYnO1xyXG52YXIgQ09MT1JfQkxBQ0sgICAgPSAnIzAwMDAwMCc7XHJcbnZhciBDT0xPUl9XSElURSAgICA9ICcjRkZGRkZGJztcclxudmFyIENPTE9SX0dSQVlfMTAwID0gJyNlYmVlZjQnO1xyXG52YXIgQ09MT1JfR1JBWV8yMDAgPSAnI2RhZTBlYyc7XHJcbnZhciBDT0xPUl9HUkFZXzMwMCA9ICcjYzlkMmUzJztcclxudmFyIENPTE9SX0dSQVlfNDAwID0gJyNhOGI2ZDEnO1xyXG52YXIgQ09MT1JfR1JBWV81MDAgPSAnIzg2OWFjMCc7XHJcbnZhciBDT0xPUl9HUkFZXzYwMCA9ICcjNjU3ZWFlJztcclxudmFyIENPTE9SX0dSQVlfNzAwID0gJyM0ZDY1OTMnO1xyXG52YXIgQ09MT1JfR1JBWV84MDAgPSAnIzNjNGU3MSc7XHJcbnZhciBDT0xPUl9HUkFZXzkwMCA9ICcjMjEyODM3JztcclxuXHJcblxyXG4vKiAwMi4gSGFuZGxlIFNjcm9sbGJhclxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNsaW1TY3JvbGwgPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHQkLndoZW4oJCgnW2RhdGEtc2Nyb2xsYmFyPXRydWVdJykuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRnZW5lcmF0ZVNsaW1TY3JvbGwoJCh0aGlzKSk7XHJcblx0fSkpLmRvbmUoZnVuY3Rpb24oKSB7XHJcblx0XHQkKCdbZGF0YS1zY3JvbGxiYXI9XCJ0cnVlXCJdJykubW91c2VvdmVyKCk7XHJcblx0fSk7XHJcbn07XHJcbnZhciBnZW5lcmF0ZVNsaW1TY3JvbGwgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcblx0dmFyIGlzTW9iaWxlID0gKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7XHJcblx0XHJcblx0aWYgKCQoZWxlbWVudCkuYXR0cignZGF0YS1pbml0JykgfHwgKGlzTW9iaWxlICYmICQoZWxlbWVudCkuYXR0cignZGF0YS1za2lwLW1vYmlsZScpKSkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHR2YXIgZGF0YUhlaWdodCA9ICQoZWxlbWVudCkuYXR0cignZGF0YS1oZWlnaHQnKTtcclxuXHRcdGRhdGFIZWlnaHQgPSAoIWRhdGFIZWlnaHQpID8gJChlbGVtZW50KS5oZWlnaHQoKSA6IGRhdGFIZWlnaHQ7XHJcblxyXG5cdHZhciBzY3JvbGxCYXJPcHRpb24gPSB7XHJcblx0XHRoZWlnaHQ6IGRhdGFIZWlnaHQsIFxyXG5cdFx0YWx3YXlzVmlzaWJsZTogZmFsc2VcclxuXHR9O1xyXG5cdGlmKGlzTW9iaWxlKSB7XHJcblx0XHQkKGVsZW1lbnQpLmNzcygnaGVpZ2h0JywgZGF0YUhlaWdodCk7XHJcblx0XHQkKGVsZW1lbnQpLmNzcygnb3ZlcmZsb3cteCcsJ3Njcm9sbCcpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQkKGVsZW1lbnQpLnNsaW1TY3JvbGwoc2Nyb2xsQmFyT3B0aW9uKTtcclxuXHRcdCQoZWxlbWVudCkuY2xvc2VzdCgnLnNsaW1TY3JvbGxEaXYnKS5maW5kKCcuc2xpbVNjcm9sbEJhcicpLmhpZGUoKTtcclxuXHR9XHJcblx0JChlbGVtZW50KS5hdHRyKCdkYXRhLWluaXQnLCB0cnVlKTtcclxufTtcclxuXHJcblxyXG4vKiAwNC4gSGFuZGxlIFNpZGViYXIgTWVudVxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIGhhbmRsZVNpZGViYXJNZW51ID0gZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hcHAtc2lkZWJhciAubWVudSA+IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy5tZW51LXN1Ym1lbnUnKTtcclxuXHRcdHZhciBvdGhlck1lbnUgPSAkKCcuYXBwLXNpZGViYXIgLm1lbnUgPiAubWVudS1pdGVtLmhhcy1zdWIgPiAubWVudS1zdWJtZW51Jykubm90KHRhcmdldCk7XHJcblxyXG5cdFx0aWYgKCQoJy5hcHAtc2lkZWJhci1taW5pZmllZCcpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHQkKG90aGVyTWVudSkuc2xpZGVVcCgyNTApO1xyXG5cdFx0XHQkKG90aGVyTWVudSkuY2xvc2VzdCgnLm1lbnUtaXRlbScpLnJlbW92ZUNsYXNzKCdleHBhbmQnKTtcclxuXHRcdFx0XHJcblx0XHRcdCQodGFyZ2V0KS5zbGlkZVRvZ2dsZSgyNTApO1xyXG5cdFx0XHR2YXIgdGFyZ2V0RWxtID0gJCh0YXJnZXQpLmNsb3Nlc3QoJy5tZW51LWl0ZW0nKTtcclxuXHRcdFx0aWYgKCQodGFyZ2V0RWxtKS5oYXNDbGFzcygnZXhwYW5kJykpIHtcclxuXHRcdFx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3MoJ2V4cGFuZCcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQodGFyZ2V0RWxtKS5hZGRDbGFzcygnZXhwYW5kJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmFwcC1zaWRlYmFyIC5tZW51ID4gLm1lbnUtaXRlbS5oYXMtc3ViIC5tZW51LXN1Ym1lbnUgLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtbGluaycsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0aWYgKCQoJy5hcHAtc2lkZWJhci1taW5pZmllZCcpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5uZXh0KCcubWVudS1zdWJtZW51Jyk7XHJcblx0XHRcdCQodGFyZ2V0KS5zbGlkZVRvZ2dsZSgyNTApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDA1LiBIYW5kbGUgU2lkZWJhciBNaW5pZnlcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBNT0JJTEVfU0lERUJBUl9UT0dHTEVfQ0xBU1MgPSAnYXBwLXNpZGViYXItbW9iaWxlLXRvZ2dsZWQnO1xyXG52YXIgTU9CSUxFX1NJREVCQVJfQ0xPU0VEX0NMQVNTID0gJ2FwcC1zaWRlYmFyLW1vYmlsZS1jbG9zZWQnO1xyXG52YXIgaGFuZGxlU2lkZWJhck1pbmlmeSA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoJ1tkYXRhLXRvZ2dsZT1cInNpZGViYXItbWluaWZ5XCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHR2YXIgdGFyZ2V0RWxtID0gJyNhcHAnO1xyXG5cdFx0dmFyIHRhcmdldENsYXNzID0gJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJztcclxuXHRcdFxyXG5cdFx0aWYgKCQodGFyZ2V0RWxtKS5oYXNDbGFzcyh0YXJnZXRDbGFzcykpIHtcclxuXHRcdFx0JCh0YXJnZXRFbG0pLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcclxuXHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FwcFNpZGViYXJNaW5pZmllZCcpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCh0YXJnZXRFbG0pLmFkZENsYXNzKHRhcmdldENsYXNzKTtcclxuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FwcFNpZGViYXJNaW5pZmllZCcsIHRydWUpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdGlmICh0eXBlb2YoU3RvcmFnZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRpZiAobG9jYWxTdG9yYWdlLmFwcFNpZGViYXJNaW5pZmllZCkge1xyXG5cdFx0XHQkKCcjYXBwJykuYWRkQ2xhc3MoJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJyk7XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG52YXIgaGFuZGxlU2lkZWJhck1vYmlsZVRvZ2dsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGU9XCJzaWRlYmFyLW1vYmlsZVwiXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0dmFyIHRhcmdldEVsbSA9ICcjYXBwJztcclxuXHRcdFxyXG5cdFx0JCh0YXJnZXRFbG0pLnJlbW92ZUNsYXNzKE1PQklMRV9TSURFQkFSX0NMT1NFRF9DTEFTUykuYWRkQ2xhc3MoTU9CSUxFX1NJREVCQVJfVE9HR0xFX0NMQVNTKTtcclxuXHR9KTtcclxufTtcclxudmFyIGhhbmRsZVNpZGViYXJNb2JpbGVEaXNtaXNzID0gZnVuY3Rpb24oKSB7XHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWRpc21pc3M9XCJzaWRlYmFyLW1vYmlsZVwiXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFxyXG5cdFx0dmFyIHRhcmdldEVsbSA9ICcjYXBwJztcclxuXHRcdFxyXG5cdFx0JCh0YXJnZXRFbG0pLnJlbW92ZUNsYXNzKE1PQklMRV9TSURFQkFSX1RPR0dMRV9DTEFTUykuYWRkQ2xhc3MoTU9CSUxFX1NJREVCQVJfQ0xPU0VEX0NMQVNTKTtcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQodGFyZ2V0RWxtKS5yZW1vdmVDbGFzcyhNT0JJTEVfU0lERUJBUl9DTE9TRURfQ0xBU1MpO1xyXG5cdFx0fSwgMjUwKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAwNi4gSGFuZGxlIFNpZGViYXIgTWluaWZ5IEZsb2F0IE1lbnVcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBmbG9hdFN1Yk1lbnVUaW1lb3V0O1xyXG52YXIgdGFyZ2V0RmxvYXRNZW51O1xyXG52YXIgaGFuZGxlTW91c2VvdmVyRmxvYXRTdWJNZW51ID0gZnVuY3Rpb24oZWxtKSB7XHJcblx0Y2xlYXJUaW1lb3V0KGZsb2F0U3ViTWVudVRpbWVvdXQpO1xyXG59O1xyXG52YXIgaGFuZGxlTW91c2VvdXRGbG9hdFN1Yk1lbnUgPSBmdW5jdGlvbihlbG0pIHtcclxuXHRmbG9hdFN1Yk1lbnVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdCQoJy5hcHAtZmxvYXQtc3VibWVudScpLnJlbW92ZSgpO1xyXG5cdH0sIDI1MCk7XHJcbn07XHJcbnZhciBoYW5kbGVTaWRlYmFyTWluaWZ5RmxvYXRNZW51ID0gZnVuY3Rpb24oKSB7XHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hcHAtZmxvYXQtc3VibWVudSAubWVudS1pdGVtLmhhcy1zdWIgPiAubWVudS1saW5rJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHJcblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5uZXh0KCcubWVudS1zdWJtZW51Jyk7XHJcblx0XHQkKHRhcmdldCkuc2xpZGVUb2dnbGUoMjUwLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRhcmdldE1lbnUgPSAkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKTtcclxuXHRcdFx0dmFyIHRhcmdldEhlaWdodCA9ICQodGFyZ2V0TWVudSkuaGVpZ2h0KCkgKyAyMDtcclxuXHRcdFx0dmFyIHRhcmdldE9mZnNldCA9ICQodGFyZ2V0TWVudSkub2Zmc2V0KCk7XHJcblx0XHRcdHZhciB0YXJnZXRUb3AgPSAkKHRhcmdldE1lbnUpLmF0dHIoJ2RhdGEtb2Zmc2V0LXRvcCcpO1xyXG5cdFx0XHR2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cdFx0XHRpZiAoKHdpbmRvd0hlaWdodCAtIHRhcmdldFRvcCkgPiB0YXJnZXRIZWlnaHQpIHtcclxuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5jc3Moe1xyXG5cdFx0XHRcdFx0J3RvcCc6IHRhcmdldFRvcCxcclxuXHRcdFx0XHRcdCdib3R0b20nOiAnYXV0bycsXHJcblx0XHRcdFx0XHQnb3ZlcmZsb3cnOiAnaW5pdGlhbCdcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5jc3Moe1xyXG5cdFx0XHRcdFx0J2JvdHRvbSc6IDAsXHJcblx0XHRcdFx0XHQnb3ZlcmZsb3cnOiAnc2Nyb2xsJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHQkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJy5hcHAtc2lkZWJhci1taW5pZmllZCAuYXBwLXNpZGViYXIgLm1lbnUgLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtbGluaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0Y2xlYXJUaW1lb3V0KGZsb2F0U3ViTWVudVRpbWVvdXQpO1xyXG5cdFx0XHJcblx0XHR2YXIgdGFyZ2V0TWVudSA9ICQodGhpcykuY2xvc2VzdCgnLm1lbnUtaXRlbScpLmZpbmQoJy5tZW51LXN1Ym1lbnUnKS5maXJzdCgpO1xyXG5cdFx0aWYgKHRhcmdldEZsb2F0TWVudSA9PSB0aGlzKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRhcmdldEZsb2F0TWVudSA9IHRoaXM7XHJcblx0XHR9XHJcblx0XHR2YXIgdGFyZ2V0TWVudUh0bWwgPSAkKHRhcmdldE1lbnUpLmh0bWwoKTtcclxuXHRcdFxyXG5cdFx0aWYgKHRhcmdldE1lbnVIdG1sKSB7XHJcblx0XHRcdHZhciB0YXJnZXRIZWlnaHQgPSAkKHRhcmdldE1lbnUpLmhlaWdodCgpICsgMjA7XHJcblx0XHRcdHZhciB0YXJnZXRPZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpO1xyXG5cdFx0XHR2YXIgdGFyZ2V0VG9wID0gdGFyZ2V0T2Zmc2V0LnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHRcdFx0dmFyIHRhcmdldExlZnQgPSAoISQoJyNhcHAnKS5oYXNDbGFzcygnYXBwLXNpZGViYXItcmlnaHQnKSkgPyAkKCcjc2lkZWJhcicpLndpZHRoKCkgKyAkKCcjc2lkZWJhcicpLm9mZnNldCgpLmxlZnQgOiAnYXV0byc7XHJcblx0XHRcdHZhciB0YXJnZXRSaWdodCA9ICghJCgnI2FwcCcpLmhhc0NsYXNzKCdhcHAtc2lkZWJhci1yaWdodCcpKSA/ICdhdXRvJyA6ICQoJyNzaWRlYmFyJykud2lkdGgoKTtcclxuXHRcdFx0dmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuXHRcdFx0dmFyIHN1Ym1lbnVIZWlnaHQgPSAwO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCQoJy5hcHAtZmxvYXQtc3VibWVudScpLmxlbmd0aCA9PSAwKSB7XHJcblx0XHRcdFx0dGFyZ2V0TWVudUh0bWwgPSAnPGRpdiBjbGFzcz1cImFwcC1mbG9hdC1zdWJtZW51XCIgZGF0YS1vZmZzZXQtdG9wPVwiJysgdGFyZ2V0VG9wICsnXCIgb25tb3VzZW92ZXI9XCJoYW5kbGVNb3VzZW92ZXJGbG9hdFN1Yk1lbnUodGhpcylcIiBvbm1vdXNlb3V0PVwiaGFuZGxlTW91c2VvdXRGbG9hdFN1Yk1lbnUodGhpcylcIj4nICsgdGFyZ2V0TWVudUh0bWwgKyAnPC9kaXY+JztcclxuXHRcdFx0XHQkKCdib2R5JykuYXBwZW5kKHRhcmdldE1lbnVIdG1sKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5odG1sKHRhcmdldE1lbnVIdG1sKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzdWJtZW51SGVpZ2h0ID0gJCgnLmFwcC1mbG9hdC1zdWJtZW51JykuaGVpZ2h0KCk7XHJcblx0XHRcdGlmICgod2luZG93SGVpZ2h0IC0gdGFyZ2V0VG9wKSA+IHRhcmdldEhlaWdodCAmJiAoKHRhcmdldFRvcCArIHN1Ym1lbnVIZWlnaHQpIDwgd2luZG93SGVpZ2h0KSkge1xyXG5cdFx0XHRcdCQoJy5hcHAtZmxvYXQtc3VibWVudScpLmNzcyh7XHJcblx0XHRcdFx0XHQndG9wJzogdGFyZ2V0VG9wLFxyXG5cdFx0XHRcdFx0J2xlZnQnOiB0YXJnZXRMZWZ0LFxyXG5cdFx0XHRcdFx0J2JvdHRvbSc6ICdhdXRvJyxcclxuXHRcdFx0XHRcdCdyaWdodCc6IHRhcmdldFJpZ2h0XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykuY3NzKHtcclxuXHRcdFx0XHRcdCdib3R0b20nOiAwLFxyXG5cdFx0XHRcdFx0J3RvcCc6ICdhdXRvJyxcclxuXHRcdFx0XHRcdCdsZWZ0JzogdGFyZ2V0TGVmdCxcclxuXHRcdFx0XHRcdCdyaWdodCc6IHRhcmdldFJpZ2h0XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoJy5hcHAtZmxvYXQtc3VibWVudScpLnJlbW92ZSgpO1xyXG5cdFx0XHR0YXJnZXRGbG9hdE1lbnUgPSAnJztcclxuXHRcdH1cclxuXHR9KTtcclxuXHQkKGRvY3VtZW50KS5vbignbW91c2VvdXQnLCAnLmFwcC1zaWRlYmFyLW1pbmlmaWVkIC5hcHAtc2lkZWJhciAubWVudSA+IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbigpIHtcclxuXHRcdGZsb2F0U3ViTWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5yZW1vdmUoKTtcclxuXHRcdFx0dGFyZ2V0RmxvYXRNZW51ID0gJyc7XHJcblx0XHR9LCAyNTApO1xyXG5cdH0pO1xyXG59XHJcblxyXG5cclxuLyogMDcuIEhhbmRsZSBEcm9wZG93biBDbG9zZSBPcHRpb25cclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVEcm9wZG93bkNsb3NlID0gZnVuY3Rpb24oKSB7XHJcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWRyb3Bkb3duLWNsb3NlPVwiZmFsc2VcIl0nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdH0pO1xyXG59O1xyXG5cclxuXHJcbi8qIDA4LiBIYW5kbGUgQ2FyZCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXHJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG52YXIgY2FyZEFjdGlvblJ1bm5pbmcgPSBmYWxzZTtcclxudmFyIGhhbmRsZUNhcmRBY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0aWYgKGNhcmRBY3Rpb25SdW5uaW5nKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cdGNhcmRBY3Rpb25SdW5uaW5nID0gdHJ1ZTtcclxuXHJcblx0Ly8gZXhwYW5kXHJcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICdbZGF0YS10b2dnbGU9Y2FyZC1leHBhbmRdJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0aWYgKCEkKHRoaXMpLmF0dHIoJ2RhdGEtaW5pdCcpKSB7XHJcblx0XHRcdCQodGhpcykudG9vbHRpcCh7XHJcblx0XHRcdFx0dGl0bGU6ICdFeHBhbmQgLyBDb21wcmVzcycsXHJcblx0XHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyxcclxuXHRcdFx0XHR0cmlnZ2VyOiAnaG92ZXInLFxyXG5cdFx0XHRcdGNvbnRhaW5lcjogJ2JvZHknXHJcblx0XHRcdH0pO1xyXG5cdFx0XHQkKHRoaXMpLnRvb2x0aXAoJ3Nob3cnKTtcclxuXHRcdFx0JCh0aGlzKS5hdHRyKCdkYXRhLWluaXQnLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlPWNhcmQtZXhwYW5kXScsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJyk7XHJcblx0XHR2YXIgdGFyZ2V0Qm9keSA9ICQodGFyZ2V0KS5maW5kKCcuY2FyZC1ib2R5Jyk7XHJcblx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSAnY2FyZC1leHBhbmQnO1xyXG5cdFx0dmFyIHRhcmdldFRvcCA9IDQwO1xyXG5cdFx0aWYgKCQodGFyZ2V0Qm9keSkubGVuZ3RoICE9PSAwKSB7XHJcblx0XHRcdHZhciB0YXJnZXRPZmZzZXRUb3AgPSAkKHRhcmdldCkub2Zmc2V0KCkudG9wO1xyXG5cdFx0XHR2YXIgdGFyZ2V0Qm9keU9mZnNldFRvcCA9ICQodGFyZ2V0Qm9keSkub2Zmc2V0KCkudG9wO1xyXG5cdFx0XHR0YXJnZXRUb3AgPSB0YXJnZXRCb2R5T2Zmc2V0VG9wIC0gdGFyZ2V0T2Zmc2V0VG9wO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgkKCdib2R5JykuaGFzQ2xhc3ModGFyZ2V0Q2xhc3MpICYmICQodGFyZ2V0KS5oYXNDbGFzcyh0YXJnZXRDbGFzcykpIHtcclxuXHRcdFx0JCgnYm9keSwgLmNhcmQnKS5yZW1vdmVDbGFzcyh0YXJnZXRDbGFzcyk7XHJcblx0XHRcdCQoJy5jYXJkJykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuXHRcdFx0JCh0YXJnZXRCb2R5KS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnYm9keScpLmFkZENsYXNzKHRhcmdldENsYXNzKTtcclxuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpLmFkZENsYXNzKHRhcmdldENsYXNzKTtcclxuXHRcdH1cclxuXHRcdCQod2luZG93KS50cmlnZ2VyKCdyZXNpemUnKTtcclxuXHR9KTtcclxufTtcclxuXHJcblxyXG4vKiAwOS4gSGFuZGxlIFRvb2x0aXAgJiBQb3BvdmVyIEFjdGl2YXRpb25cclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRpZiAoJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0JCgnW2RhdGEtdG9nZ2xlPXRvb2x0aXBdJykudG9vbHRpcCgpO1xyXG5cdH1cclxuXHRpZiAoJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0JCgnW2RhdGEtdG9nZ2xlPXBvcG92ZXJdJykucG9wb3ZlcigpO1xyXG5cdH1cclxufTtcclxuXHJcblxyXG4vKiAxMC4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0b3RhbFNjcm9sbCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xyXG5cclxuXHRcdGlmICh0b3RhbFNjcm9sbCA+PSAyMDApIHtcclxuXHRcdFx0JCgnW2RhdGEtY2xpY2s9c2Nyb2xsLXRvcF0nKS5hZGRDbGFzcygnc2hvdycpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCgnW2RhdGEtY2xpY2s9c2Nyb2xsLXRvcF0nKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdCQoJ1tkYXRhLWNsaWNrPXNjcm9sbC10b3BdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0JCgnaHRtbCwgYm9keSwgLmNvbnRlbnQnKS5hbmltYXRlKHtcclxuXHRcdFx0c2Nyb2xsVG9wOiAkKFwiYm9keVwiKS5vZmZzZXQoKS50b3BcclxuXHRcdH0sIDUwMCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogMTEuIEhhbmRsZSBoZXhUb1JnYmFcclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoZXhUb1JnYmEgPSBmdW5jdGlvbihoZXgsIHRyYW5zcGFyZW50ID0gMSkge1xyXG5cdHZhciBjO1xyXG5cdGlmKC9eIyhbQS1GYS1mMC05XXszfSl7MSwyfSQvLnRlc3QoaGV4KSl7XHJcblx0XHRcdGM9IGhleC5zdWJzdHJpbmcoMSkuc3BsaXQoJycpO1xyXG5cdFx0XHRpZihjLmxlbmd0aD09IDMpe1xyXG5cdFx0XHRcdFx0Yz0gW2NbMF0sIGNbMF0sIGNbMV0sIGNbMV0sIGNbMl0sIGNbMl1dO1xyXG5cdFx0XHR9XHJcblx0XHRcdGM9ICcweCcrYy5qb2luKCcnKTtcclxuXHRcdFx0cmV0dXJuICdyZ2JhKCcrWyhjPj4xNikmMjU1LCAoYz4+OCkmMjU1LCBjJjI1NV0uam9pbignLCcpKycsJysgdHJhbnNwYXJlbnQgKycpJztcclxuXHR9XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdCYWQgSGV4Jyk7XHJcbn07XHJcblxyXG5cclxuLyogMTIuIEhhbmRsZSBTY3JvbGwgdG9cclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbnZhciBoYW5kbGVTY3JvbGxUbyA9IGZ1bmN0aW9uKCkge1xyXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGU9XCJzY3JvbGwtdG9cIl0nLCBmdW5jdGlvbihlKSB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdHZhciB0YXJnZXRFbG0gPSAoJCh0aGlzKS5hdHRyKCdkYXRhLXRhcmdldCcpKSA/ICQodGhpcykuYXR0cignZGF0YS10YXJnZXQnKSA6ICQodGhpcykuYXR0cignaHJlZicpO1xyXG5cdFx0aWYgKHRhcmdldEVsbSkge1xyXG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcblx0XHRcdFx0c2Nyb2xsVG9wOiAkKHRhcmdldEVsbSkub2Zmc2V0KCkudG9wIC0gJCgnI2hlYWRlcicpLmhlaWdodCgpIC0gMjRcclxuXHRcdFx0fSwgMCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5cclxuLyogQXBwbGljYXRpb24gQ29udHJvbGxlclxyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxudmFyIEFwcCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0Ly9tYWluIGZ1bmN0aW9uXHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMuaW5pdFNpZGViYXIoKTtcclxuXHRcdFx0dGhpcy5pbml0SGVhZGVyKCk7XHJcblx0XHRcdHRoaXMuaW5pdENvbXBvbmVudCgpO1xyXG5cdFx0fSxcclxuXHRcdGluaXRTaWRlYmFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aGFuZGxlU2lkZWJhck1pbmlmeUZsb2F0TWVudSgpO1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyTWVudSgpO1xyXG5cdFx0XHRoYW5kbGVTaWRlYmFyTWluaWZ5KCk7XHJcblx0XHRcdGhhbmRsZVNpZGViYXJNb2JpbGVUb2dnbGUoKTtcclxuXHRcdFx0aGFuZGxlU2lkZWJhck1vYmlsZURpc21pc3MoKTtcclxuXHRcdH0sXHJcblx0XHRpbml0SGVhZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdH0sXHJcblx0XHRpbml0Q29tcG9uZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aGFuZGxlU2xpbVNjcm9sbCgpO1xyXG5cdFx0XHRoYW5kbGVDYXJkQWN0aW9uKCk7XHJcblx0XHRcdGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbigpO1xyXG5cdFx0XHRoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbigpO1xyXG5cdFx0XHRoYW5kbGVEcm9wZG93bkNsb3NlKCk7XHJcblx0XHRcdGhhbmRsZVNjcm9sbFRvKCk7XHJcblx0XHR9LFxyXG5cdFx0c2Nyb2xsVG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCgnaHRtbCwgYm9keSwgLmNvbnRlbnQnKS5hbmltYXRlKHtcclxuXHRcdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3BcclxuXHRcdFx0fSwgMCk7XHJcblx0XHR9XHJcblx0fTtcclxufSgpO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblx0QXBwLmluaXQoKTtcclxufSk7Il19
